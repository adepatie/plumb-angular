!function(a,b){"use strict";function c(){a[PLUMB_CONFIG.ANGULAR].module("PlumbApp",[]),a[PLUMB_CONFIG.ANGULAR].module("PlumbApp").run(["$templateCache",function(a){a.put("plumb-templates/menu/account.html",'<h1>My Account</h1>\n<div class="alerts">\n  <div ng-repeat="alert in messages[\'account\']" class="alert-{{alert.type}}">{{alert.message}}</div>\n</div>\n<p>Shipping Addresses</p>\n<ul class="addresses-list">\n  <li class="address" ng-repeat="address in addressList">\n    <div class="clearfix" ng-show="!address.$editing">\n      <div class="left">\n        <div><span ng-bind="address.name | limitTo:18"></span></div>\n        <div><span ng-bind="(address.email | limitTo:18) + \'...\'"></span></div>\n        <div><span ng-bind="address.phone | limitTo:18"></span></div>\n      </div>\n      <div class="right">\n        <div><span ng-bind="address.address.address_1 | limitTo:18"></span></div>\n        <div><span ng-bind="address.address.city + \', \' + address.address.state_code | limitTo:18"></span></div>\n        <div><span ng-bind="address.address.postal_code + \', \' + address.address.country_code"></span></div>\n      </div>\n    </div>\n    <div class="edit-holder" ng-show="address.$editing">\n      <form ng-submit="updateAddress(address)">\n        <input class="plumb-input" type="text" ng-model="address.name" placeholder="Your Name">\n        <input class="plumb-input" type="text" ng-model="address.company_name" placeholder="(optional) Company Name">\n        <input class="plumb-input" type="text" ng-model="address.address.address_1" placeholder="Enter your address" ng-change="lookupGeoCode(address.address.address_1, address.address.postal_code, address)">\n        <div ng-show="geocodeComplete">\n          <input class="plumb-input" type="text" ng-model="address.address.address_2" placeholder="(optional) Address Line 2">\n          <input class="plumb-input" type="text" ng-model="address.address.city" placeholder="Enter your city">\n          <select class="plumb-input" ng-model="address.address.state_code" ng-options="state.value as state.name for state in stateList"><option value>Select a State</option></select>\n          <select class="plumb-input" ng-model="address.address.country_code" ng-options="country.value as country.name for country in countryList"><option value>Select a Country</option></select>\n        </div>\n        <input class="plumb-input" type="text" ng-model="address.address.postal_code" placeholder="Enter your postal/zip code" ng-change="lookupGeoCode(address.address.address_1, address.address.postal_code, address)">\n        <button class="plumb-button small half cancel" ng-click="address.$editing = false">Cancel</button>\n        <button class="plumb-button small half submit" ng-click="saveAddress(address)">Save</button>\n      </form>\n    </div>\n    <div ng-show="!address.$editing">\n      <button class="plumb-button small half edit" ng-click="address.$editing = true">Edit</button>\n      <button class="plumb-button small half delete" ng-click="deleteAddress(address)">Delete</button>\n    </div>\n  </li>\n</ul>\n<p>Payment Methods</p>\n<div class="alerts">\n  <div ng-repeat="alert in messages[\'payment_methods\']" class="alert-{{alert.type}}">{{alert.message}}</div>\n</div>\n<ul class="payment-methods">\n  <li class="payment-method" ng-repeat="payment_method in paymentMethodList">\n    <div class="clearfix" ng-show="!payment_method.$editing">\n      <div class="left" ng-bind="payment_method.nickname"></div>\n      <div class="right" ng-bind="getPaymentMethodType(payment_method)"></div>\n    </div>\n    <div class="edit-holder" ng-show="payment_method.$editing">\n      <form ng-submit="updatePaymentMethod(payment_method)">\n        <input class="plumb-input" type="text" ng-model="payment_method.nickname" placeholder="Nickname">\n        <button class="plumb-button small half cancel" ng-click="payment_method.$editing = false">Cancel</button>\n        <button class="plumb-button small half submit" ng-click="savePaymentMethod(payment_method)">Save</button>\n      </form>\n    </div>\n    <div ng-show="!payment_method.$editing">\n      <button class="plumb-button small half edit" ng-click="payment_method.$editing = true">Edit</button>\n      <button class="plumb-button small half delete" ng-click="deletePaymentMethod(payment_method)">Delete</button>\n    </div>\n  </li>\n</ul>'),a.put("plumb-templates/menu/button-cart.html",'<a ng-click="menuService.toggle(\'cart\')" plumb-popover="shoppingCartPopoverText" showing="{{cartAddActive}}" ng-class="menuService.checkClass(\'cart\')"><span class="kicon-cart"></span><span class="count">{{quantity_total}}</span></a>'),a.put("plumb-templates/menu/button.html",'<a ng-href="{{menuService.getUri(mi)}}" ng-click="mi.onClick ? mi.onClick() : menuService.toggle(mi.tag)" plumb-popover="mi.name" class="menuService.checkClass(mi.tag)"><span class="{{mi.icon}}"></span></a>'),a.put("plumb-templates/menu/cart.html",'<h1>Shopping Cart</h1>\n<div ng-show="!cart || !cart.length">\n  <p>You have nothing in your cart</p>\n  <button type="button" class="plumb-button" ng-click="menuService.close()">Continue Shopping</button>\n</div>\n<div ng-show="cart && cart.length">\n  <ul class="cart-products">\n    <li class="cart-product" ng-repeat="product in cart">\n      <div class="clearfix">\n        <div class="left">\n          <div class="name" ng-bind="product.name"></div>\n          <span class="quantity-in-box" ng-show="product.quantity_in_box > 1">({{product.quantity_in_box}} in box)</span>\n        </div>\n        <div class="right">\n          <div class="price"><span ng-bind-html="displayProductPrice(product)"></span></div>\n        </div>\n      </div>\n      <div class="clearfix">\n        <div class="left">\n          <div class="variants" ng-repeat="v in product.variants">{{v.name}}: {{v.value}}</div>\n          <div class="quantity">Count: <input ng-model="product.qty" ng-change="updateQuantity(product)" ng-model-options="{updateOn: \'blur\'}"></div>\n        </div>\n        <div class="right">\n          <div class="variants" ng-repeat="v in product.variants" ng-bind-html="displayVariantPrice(v)"></div>\n          <div class="remove"><a href ng-click="removeProduct(product)">remove</a></div>\n        </div>\n      </div>\n    </li>\n    <li class="cart-product total">\n      <div class="left">Product Total</div>\n      <div class="right product-total">{{product_total/100 | currency}}</div>\n    </li>\n  </ul>\n  <button type="button" class="plumb-button checkout-button" ng-click="menuService.toggle(\'checkout\', \'cart\')">Checkout</button>\n</div>'),a.put("plumb-templates/menu/checkout-2.html",'<h1>Checkout</h1>\n<p>Please complete the form below to finish checkout</p>\n<form>\n  <div ng-show="addressList.length > 0">\n    <p>Select from a billing address you have saved</p>\n    <select class="plumb-input" ng-model="checkout.billing.ship_to" ng-options="address as address.address.address_1 for address in addressList" ng-change="changedAddress()"><option value>New Address</option></select>\n  </div>\n  <div>\n    <button type="button" class="plumb-button small" ng-click="copyShippingAddress()" ng-hide="shippingAddressCopied">Copy Shipping Address</button>\n  </div>\n  <div>\n    <p>Enter your email address</p>\n    <input class="plumb-input" type="email" ng-model="checkout.billing.ship_to.email" placeholder="Your email address">\n  </div>\n  <div>\n    <p>Enter a billing address</p>\n    <input class="plumb-input" type="text" ng-model="checkout.billing.ship_to.name" placeholder="Your Name">\n    <input class="plumb-input" type="text" ng-model="checkout.billing.ship_to.company_name" placeholder="(optional) Company Name">\n    <input class="plumb-input" type="phone" ng-model="checkout.billing.ship_to.phone" placeholder="Your Phone Number">\n    <input class="plumb-input" type="text" ng-model="checkout.billing.ship_to.address.address_1" placeholder="Enter your address" ng-change="lookupGeoCode(checkout.billing.ship_to.address.address_1, checkout.billing.ship_to.address.postal_code, checkout.billing)">\n    <div ng-show="geocodeComplete">\n      <input class="plumb-input" type="text" ng-model="checkout.billing.ship_to.address.address_2" placeholder="(optional) Address Line 2">\n      <input class="plumb-input" type="text" ng-model="checkout.billing.ship_to.address.city" placeholder="Enter your city">\n      <select class="plumb-input" ng-model="checkout.billing.ship_to.address.state_code" ng-options="state.value as state.name for state in stateList"><option value>Select a State</option></select>\n      <select class="plumb-input" ng-model="checkout.billing.ship_to.address.country_code" ng-options="country.value as country.name for country in countryList"><option value>Select a Country</option></select>\n    </div>\n    <input class="plumb-input" type="text" ng-model="checkout.billing.ship_to.address.postal_code" placeholder="Enter your postal/zip code" ng-change="lookupGeoCode(checkout.billing.ship_to.address.address_1, checkout.billing.ship_to.address.postal_code, checkout.billing)">\n  </div>\n  <button type="submit" class="plumb-button contact-button" ng-click="menuService.toggle(\'checkout-3\', \'checkout-2\')">Continue</button>\n</form>'),a.put("plumb-templates/menu/checkout-3.html",'<h1>Checkout</h1>\n<p>Please complete the form below to finish checkout</p>\n<form>\n  <div ng-show="requiresShipping">\n    <p>Select a shipping method</p>\n    <div ng-repeat="package in packages" ng-show="package.rates.length">\n      <label class="plumb-label" ng-show="packages.length > 1">Package {{$index+1}}</label>\n      <select class="plumb-input" ng-model="selectedRate[$index]" ng-disabled="rates.length <= 0" ng-options="rate as ((rate.cost | currency) + \' - \' + rate.name) for rate in package.rates">\n        <option value="" ng-hide="package.rates">Please Wait...</option>\n      </select>\n    </div>\n  </div>\n  <div ng-show="paymentMethodList.length > 0">\n    <p>Select a payment method</p>\n    <select class="plumb-input" ng-model="checkout.payment_method" ng-options="payment_method as (getPaymentMethodType(payment_method) + \': \' + payment_method.nickname) for payment_method in paymentMethodList"><option value>New Credit Card</option></select>\n  </div>\n  <div ng-show="final_total > 0 && (!checkout.payment_method || !checkout.payment_method._id)">\n    <p>Enter your payment information</p>\n    <ul class="payment-options" ng-show="plumb.options.session.enable_po">\n      <li><a href class="plumb-button tiny" ng-class="getActivePayment(\'credit_card\')" ng-click="switchPaymentMethod(\'credit_card\')">Credit Card</a></li>\n      <li><a href class="plumb-button tiny" ng-class="getActivePayment(\'purchase_order\')" ng-click="switchPaymentMethod(\'purchase_order\')">PO Number</a></li>\n    </ul>\n    <div ng-show="checkout.payment_method.type === \'credit_card\'">\n      <input class="plumb-input" type="text" ng-model="checkout.payment_method.card.name" placeholder="Name on card">\n      <input class="plumb-input" type="number" ng-model="checkout.payment_method.card.card_number" placeholder="Card number">\n      <select class="plumb-input" class="expiration" ng-model="checkout.payment_method.card.expiration_month" ng-options="option.value as option.name for option in expirationMonths"><option value>Expiration Month</option></select>\n      <select class="plumb-input" class="expiration" ng-model="checkout.payment_method.card.expiration_year" ng-options="option.value as option.name for option in expirationYears"><option value>Expiration Year</option></select>\n      <input class="plumb-input" type="text" ng-model="checkout.payment_method.card.security_code" placeholder="Security code on back">\n    </div>\n    <div ng-show="checkout.payment_method.type === \'purchase_order\'">\n      <input class="plumb-input" type="text" ng-model="checkout.payment_method.reference_number" placeholder="Enter PO Number">\n    </div>\n  </div>\n  <div>\n    <p>Have a discount code or gift card?</p>\n    <p><a href class="plumb-button tiny" ng-click="addDiscount(\'code\')">Add Discount Code</a> <a href class="plumb-button tiny" ng-click="addDiscount(\'gift-card\')">Use A Gift Card</a></p>\n    <div class="discount-list">\n      <div ng-repeat="d in checkout.discounts">\n        <input class="plumb-input" type="text" code-input ng-blur="updateDiscountStatus(d)" ng-model="d.code" placeholder="Enter a {{getDiscountType(d.type)}} code"><span class="d-status" ng-bind="getDiscountStatus(d)"></span>\n      </div>\n    </div>\n  </div>\n  <div class="order-total">\n    <ul class="cart-products">\n      <li class="cart-product total">\n        <div class="left">Product Total</div>\n        <div class="right product-total">{{product_total/100 | currency}}</div>\n      </li>\n      <li class="cart-product total">\n        <div class="left">Tax Total</div>\n        <div class="right product-total">{{tax_total/100 | currency}}</div>\n      </li>\n      <li class="cart-product total">\n        <div class="left">Shipping Total</div>\n        <div class="right product-total">{{shipping_total/100 | currency}}</div>\n      </li>\n      <li class="cart-product total" ng-show="checkout.discounts.length > 0">\n        <div class="left">Discount</div>\n        <div class="right product-total">-{{discount_total/100 | currency}}</div>\n      </li>\n      <li class="cart-product final total">\n        <div class="left">Final Total</div>\n        <div class="right product-total">{{final_total/100 | currency}}</div>\n      </li>\n    </ul>\n  </div>\n  <button type="submit" class="plumb-button contact-button" ng-click="completeOrder()">Complete Order</button>\n</form>'),a.put("plumb-templates/menu/checkout-complete.html",'<h1>Order Complete!</h1>\n<p>Thank you for placing an order, you should receive an email confirmation soon</p>\n<button type="button" class="plumb-button" ng-click="menuService.close()">Continue Shopping</button>'),a.put("plumb-templates/menu/checkout.html",'<h1>Checkout</h1>\n<p>Please complete the form below to finish checkout</p>\n<form>\n  <div ng-show="!plumb.auth.loggedIn()">\n    <p>Have an account?</p>\n    <button class="plumb-button small" type="button" ng-click="menuService.toggle(\'login\', \'checkout\', \'checkout\')">Login Now</button>\n  </div>\n  <div ng-show="addressList.length > 0">\n    <p>Select from a shipping address you have saved</p>\n    <select class="plumb-input" ng-model="checkout.shipment.ship_to" ng-options="address as address.address.address_1 for address in addressList" ng-change="changedAddress()"><option value>New Address</option></select>\n  </div>\n  <div>\n    <p>Enter your email address</p>\n    <input class="plumb-input" type="email" ng-model="checkout.shipment.ship_to.email" placeholder="Your email address">\n  </div>\n  <div ng-show="requiresShipping">\n    <p>Enter a shipping address</p>\n    <input class="plumb-input" type="text" ng-model="checkout.shipment.ship_to.name" placeholder="Your Name">\n    <input class="plumb-input" type="text" ng-model="checkout.shipment.ship_to.company_name" placeholder="(optional) Company Name">\n    <input class="plumb-input" type="phone" ng-model="checkout.shipment.ship_to.phone" placeholder="Your Phone Number">\n    <input class="plumb-input" type="text" ng-model="checkout.shipment.ship_to.address.address_1" placeholder="Enter your address" ng-change="lookupGeoCode(checkout.shipment.ship_to.address.address_1, checkout.shipment.ship_to.address.postal_code, checkout.shipment)">\n    <div ng-show="geocodeComplete">\n      <input class="plumb-input" type="text" ng-model="checkout.shipment.ship_to.address.address_2" placeholder="(optional) Address Line 2">\n      <input class="plumb-input" type="text" ng-model="checkout.shipment.ship_to.address.city" placeholder="Enter your city">\n      <select class="plumb-input" ng-model="checkout.shipment.ship_to.address.state_code" ng-options="state.value as state.name for state in stateList"><option value>Select a State</option></select>\n      <select class="plumb-input" ng-model="checkout.shipment.ship_to.address.country_code" ng-options="country.value as country.name for country in countryList"><option value>Select a Country</option></select>\n    </div>\n    <input class="plumb-input" type="text" ng-model="checkout.shipment.ship_to.address.postal_code" placeholder="Enter your postal/zip code" ng-change="lookupGeoCode(checkout.shipment.ship_to.address.address_1, checkout.shipment.ship_to.address.postal_code, checkout.shipment)">\n  </div>\n  <button type="submit" class="plumb-button contact-button" ng-click="saveAddress(checkout.shipment.ship_to); menuService.toggle(\'checkout-2\', \'checkout\')">Continue</button>\n</form>'),a.put("plumb-templates/menu/contact.html",'<h1>Contact Us</h1>\n<p>Fill out the form below and we\'ll respond as soon as possible</p>\n<div class="alerts">\n  <div ng-repeat="alert in messages[\'contact\']" class="alert-{{alert.type}}">{{alert.message}}</div>\n</div>\n<form ng-submit="sendContact()">\n  <input class="plumb-input" type="text" ng-model="contact.name" placeholder="Enter your name">\n  <input class="plumb-input" type="email" ng-model="contact.email" placeholder="Enter your email">\n  <textarea rows="3" class="plumb-input" ng-model="contact.message" placeholder="Enter a message or concern to send to us"></textarea>\n  <button type="submit" class="plumb-button contact-button">Contact</button>\n</form>'),a.put("plumb-templates/menu/forgot-password.html",'<h1>Forgot My Password</h1>\n<p>Enter your email address and we will send you instructions to reset your password</p>\n<div class="alerts">\n  <div ng-repeat="alert in messages[\'forgot-password\']" class="alert-{{alert.type}}">{{alert.message}}</div>\n</div>\n<form ng-submit="forgotPassword()">\n  <input class="plumb-input" type="text" ng-model="forgot.email" placeholder="Enter your email address">\n  <button class="plumb-button send-password-instructions" type="submit" class="login-button">Send Instructions</button>\n</form>'),a.put("plumb-templates/menu/register.html",'<h1>Register</h1>\n<p>Enter the fields below to get started</p>\n<form ng-submit="registerUser()">\n  <input class="plumb-input" type="text" ng-model="register.first_name" placeholder="Enter your first name">\n  <input class="plumb-input" type="text" ng-model="register.last_name" placeholder="Enter your last name">\n  <input class="plumb-input" type="email" ng-model="register.email" placeholder="Enter your email">\n  <input class="plumb-input" type="password" ng-model="register.password" placeholder="Enter a password">\n  <button type="submit" class="plumb-button register-button">Register</button>\n  <p>Already have an account?</p>\n  <button type="button" class="plumb-button small login-button" ng-click="menuService.toggle(\'login\', \'register\')">Sign in now</button>\n</form>'),a.put("plumb-templates/menu/sign-in.html",'<h1>Sign In</h1>\n<p>Sign into your Plumb account.</p>\n<form ng-submit="loginUser()">\n  <input class="plumb-input" type="text" ng-model="login.username" placeholder="Enter your username or email">\n  <input class="plumb-input" type="password" ng-model="login.password" placeholder="Enter your password">\n  <button type="submit" class="plumb-button login-button">Sign In</button>\n  <div class="spacer"></div>\n  <button type="button" class="plumb-button small forgot-password" ng-click="menuService.toggle(\'forgot-password\', \'login\')">Forgot your password?</button>\n  <p>Don\'t have an account?</p>\n  <button type="button" class="plumb-button small register-button" ng-click="menuService.toggle(\'register\', \'login\')">Register Now</button>\n</form>'),a.put("plumb-templates/menu/wishlist.html",'<h1>Wishlist</h1>\n<div ng-show="!wishlist || !wishlist.length">\n  <p>You have nothing in your wishlist</p>\n  <button type="button" class="plumb-button" ng-click="menuService.close()">Continue Shopping</button>\n</div>\n<div ng-show="wishlist && wishlist.length">\n  <ul>\n    <li ng-repeat="product in cart">\n\n    </li>\n  </ul>\n  <button type="button" class="plumb-button share-wishlist-button" ng-click="menuService.toggle(\'share-wishlist\', \'wishlist\')">Share my wishlist</button>\n</div>'),a.put("plumb-templates/plumb-menu.html",'<div class="plumb-menu" ng-class="{\'logged-in\': plumb.auth.loggedIn(), \'open\': menuService.showing}">\n  <ul class="menu-wrapper">\n    <li ng-repeat="mi in menuService.menu" ng-show="menuService.checkShowing(mi)" ng-class="menuService.checkButtonClass(mi)">\n      <ng-include src="mi.buttonTemplateUrl"></ng-include>\n    </li>\n  </ul>\n  <div class="plumb-loading" ng-class="{active: (apiLoading > 0)}"><div class="loading-indicator">Loading...</div></div>\n  <div class="plumb-sidebar {{sidebar.className}}" ng-repeat="sidebar in menuService.sidebars" ng-class="{active: menuService.show(sidebar.tag)}">\n    <div class="closer">\n      <a href class="back" ng-show="menuService.back" ng-click="menuService.toggle(menuService.back)"><span class="kicon-arrow-left"></span></a>\n      <a href ng-click="menuService.close()"><span class="kicon-close"></span></a>\n    </div>\n    <div class="plumb-container">\n      <div ng-include="sidebar.templateUrl"></div>\n      <a ng-show="config.display_logo" href="https://www.plumb.com" target="_blank" class="logo">powered by <img src="https://assets.plummb.com/images/plumb_logo.png"></a>\n    </div>\n  </div>\n</div>'),a.put("plumb-templates/plumb-popover.html",'<span ng-transclude></span>\n<div class="plumb-popover">\n  <span ng-bind="plumbPopover"></span>\n</div>'),a.put("plumb-templates/plumb-product.html",'<div class="plumb-product" ng-show="product">\n  <div class="plumb-product-container">\n    <plumb-image src="product.images[0]" options="{size: \'300x200\'}" alt="product.name"></plumb-image>\n  </div>\n  <div class="plumb-product-container">\n    <div class="column">\n      <h2 ng-bind="product.name"></h2>\n      <h3 ng-show="product.sub_title" ng-bind="product.sub_title"></h3>\n      <span class="price" ng-bind="plumbMenuService.getPrice(product)"></span> <span class="quantity-in-box" ng-show="product.quantity_in_box > 1">({{product.quantity_in_box}} in box)</span>\n    </div>\n    <div class="column">\n      <div ng-show="product.attributes">\n        <div ng-repeat="variant in product.attributes">\n          <div ng-if="variant.type == \'select\'">\n            <select class="form-control" ng-model="variant.$selected" ng-change="plumbMenuService.setVariant(product, variant.name, variant.$selected)" ng-options="option as variantDisplay(option) for option in variant.options"><option value>Select a {{variant.name}}</option></select>\n          </div>\n          <div ng-if="variant.type == \'multi\'">\n            <div class="variant-option checkbox" ng-repeat="option in variant.options" ng-hide="!option.name.length">\n              <label><input type="checkbox" ng-click="plumbMenuService.setMultiVariant(product, variant.name, option)">{{option.name}}</label>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="product-quantity">\n        <input class="qty-input" type="text" ng-model="options.quantity" placeholder="QTY">\n        <span ng-show="product.minimum_quantity">({{product.minimum_quantity}} minimum)</span>\n      </div>\n      <button class="add-to-cart" type="button" ng-click="plumbMenuService.addToCart(product, options.quantity)">Buy Now</button>\n    </div>\n    <p ng-bind-html="product.short_description"></p>\n  </div>\n</div>')}]),a[PLUMB_CONFIG.ANGULAR].module("PlumbApp").provider("plumbConfig",function(){this.cache=a.PLUMB_CONFIG.CACHE?a.PLUMB_CONFIG.CACHE:!1,this.local=a.PLUMB_CONFIG.LOCAL?a.PLUMB_CONFIG.LOCAL:!1,this.accessToken=a.PLUMB_CONFIG.ACCESS_TOKEN?a.PLUMB_CONFIG.ACCESS_TOKEN:"ABC123",this.mode=a.PLUMB_CONFIG.MODE?a.PLUMB_CONFIG.MODE:"test",this.display_logo=!0,this.phrases={cart_empty:"You don't have anything in your cart"},this.baseUrls={test:"http://0.0.0.0:3458/jsapi",production:"https://www.plummb.com/api/jsapi"},this.display_price_breakdown=!0,this.months=[{name:"January",value:1},{name:"February",value:2},{name:"March",value:3},{name:"April",value:4},{name:"May",value:5},{name:"June",value:6},{name:"July",value:7},{name:"August",value:8},{name:"September",value:9},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}],this.years=[{name:(new Date).getFullYear(),value:(new Date).getFullYear()},{name:(new Date).getFullYear()+1,value:(new Date).getFullYear()+1},{name:(new Date).getFullYear()+2,value:(new Date).getFullYear()+2},{name:(new Date).getFullYear()+3,value:(new Date).getFullYear()+3},{name:(new Date).getFullYear()+4,value:(new Date).getFullYear()+4},{name:(new Date).getFullYear()+5,value:(new Date).getFullYear()+5},{name:(new Date).getFullYear()+6,value:(new Date).getFullYear()+6},{name:(new Date).getFullYear()+7,value:(new Date).getFullYear()+7}],this.states=[{name:"Alberta",value:"AB"},{name:"Alabama",value:"AL"},{name:"Alaska",value:"AK"},{name:"American Samoa",value:"AS"},{name:"Arizona",value:"AZ"},{name:"Arkansas",value:"AR"},{name:"British Columbia",value:"BC"},{name:"California",value:"CA"},{name:"Colorado",value:"CO"},{name:"Connecticut",value:"CT"},{name:"Delaware",value:"DE"},{name:"District Of Columbia",value:"DC"},{name:"Federated States Of Micronesia",value:"FM"},{name:"Florida",value:"FL"},{name:"Georgia",value:"GA"},{name:"Guam",value:"GU"},{name:"Hawaii",value:"HI"},{name:"Idaho",value:"ID"},{name:"Illinois",value:"IL"},{name:"Indiana",value:"IN"},{name:"Iowa",value:"IA"},{name:"Kansas",value:"KS"},{name:"Kentucky",value:"KY"},{name:"Louisiana",value:"LA"},{name:"Manitoba",value:"MB"},{name:"Maine",value:"ME"},{name:"Marshall Islands",value:"MH"},{name:"Maryland",value:"MD"},{name:"Massachusetts",value:"MA"},{name:"Michigan",value:"MI"},{name:"Minnesota",value:"MN"},{name:"Mississippi",value:"MS"},{name:"Missouri",value:"MO"},{name:"Montana",value:"MT"},{name:"New Brunswich",value:"NB"},{name:"Nebraska",value:"NE"},{name:"Newfoundland and Labrador",value:"NL"},{name:"Nevada",value:"NV"},{name:"New Hampshire",value:"NH"},{name:"New Jersey",value:"NJ"},{name:"New Mexico",value:"NM"},{name:"New York",value:"NY"},{name:"North Carolina",value:"NC"},{name:"North Dakota",value:"ND"},{name:"Nova Scotia",value:"NS"},{name:"Northern Mariana Islands",value:"MP"},{name:"Ohio",value:"OH"},{name:"Oklahoma",value:"OK"},{name:"Ontario",value:"ON"},{name:"Oregon",value:"OR"},{name:"Palau",value:"PW"},{name:"Pennsylvania",value:"PA"},{name:"Prince Edward Island",value:"PE"},{name:"Puerto Rico",value:"PR"},{name:"Quebec",value:"QB"},{name:"Rhode Island",value:"RI"},{name:"South Carolina",value:"SC"},{name:"South Dakota",value:"SD"},{name:"Saskatchewan",value:"SK"},{name:"Tennessee",value:"TN"},{name:"Texas",value:"TX"},{name:"Utah",value:"UT"},{name:"Vermont",value:"VT"},{name:"Virgin Islands",value:"VI"},{name:"Virginia",value:"VA"},{name:"Washington",value:"WA"},{name:"West Virginia",value:"WV"},{name:"Wisconsin",value:"WI"},{name:"Wyoming",value:"WY"},{name:"Yukon",value:"YT"}],this.countries=[{name:"United States",value:"US"},{name:"Canada",value:"CA"}],this.$get=function(){return this}}).factory("plumb",["$rootScope","$http","plumbConfig","$q",function(b,c,d,e){function f(d,e){var f=this;if(f.options={},!d)return console.log("Missing Plumb object");var g={type:"get",url:"",path:"",baseUrl:d.options.baseUrl||"",data:{},dataType:"json",headers:{"Access-Token":d.options.accessToken,"Authentication-Key":d.options.authenticationKey?d.options.authenticationKey:void 0,"Session-Id":d.options.session?d.options.session._id:void 0,"Plumb-Mode":d.options.mode?d.options.mode:"test"},commonError:function(a){console.log(a)}};return f.cleanData=function(b){if(!b)return b;var c=a[PLUMB_CONFIG.ANGULAR].copy(b);if("object"!=typeof c)return c;for(var d in c)"$"===d.charAt(0)&&"$or"!==d&&"$not"!==d&&"$ne"!==d&&"$and"!==d&&"$gt"!==d&&"$gte"!==d&&"$lt"!==d&&"$gte"!==d&&"$in"!==d&&"$nin"!==d&&"$exists"!==d&&"$type"!==d&&"$mod"!==d&&"$regex"!==d&&"$text"!==d&&"$where"!==d&&"$geoIntersects"!==d&&"$geoWithin"!==d&&"$nearSphere"!==d&&"$near"!==d&&"$box"!==d&&"$centerSphere"!==d&&"$center"!==d&&"$geometry"!==d&&"$maxDistance"!==d&&"$minDistance"!==d&&"$polygon"!==d&&"$uniqueDocs"!==d&&"$all"!==d&&"$elemMatch"!==d&&"$size"!==d&&"$meta"!==d&&"$slice"!==d&&"$options"!==d&&delete c[d],"object"==typeof c[d]&&(c[d]=f.cleanData(c[d]));return c},f.config=function(b){return f.options=a[PLUMB_CONFIG.ANGULAR].extend({},g,b),f},f.req=function(e,g,h,i){b.$broadcast("apiLoading",!0);var j=a[PLUMB_CONFIG.ANGULAR].extend({},f.options);d.options.user&&(j.headers["authentication-key"]=d.options.user.authenticationKey),j.method=e,j.url=g,h&&(h=f.cleanData(h)),"post"===e||"put"===e?(j.data=JSON.stringify(h),j.contentType="application/json"):(j.params=h,j.params&&"object"==typeof j.params.conditions&&(j.params.conditions=JSON.stringify(j.params.conditions)));var k=c(j);return k.success(function(){b.$broadcast("apiLoading",!1)}),k.error(function(a){return b.$broadcast("apiLoading",!1),b.$broadcast("apiError",a),i?i(a):void 0}),k},f.get=function(a,b,c){return"function"==typeof b&&(c=b,b=null),f.req("get",a,b,c)},f.post=function(a,b,c){return"function"==typeof b&&(c=b,b=null),f.req("post",a,b,c)},f.put=function(a,b,c){return"function"==typeof b&&(c=b,b=null),f.req("put",a,b,c)},f.del=function(a,b,c){return"function"==typeof b&&(c=b,b=null),f.req("delete",a,b,c)},f.config(e)}function g(){var a=this,b=!1;if("undefined"!=typeof Storage)try{sessionStorage.validStorage=!0,b=!0}catch(c){b=!1}return b?(a.set=function(a,b){return"object"!=typeof b?(sessionStorage[a]=b,sessionStorage[a]):(sessionStorage[a]=JSON.stringify(b),sessionStorage[a])},a.get=function(a){var b;try{b=JSON.parse(sessionStorage[a])}catch(c){b=sessionStorage[a]}return b},a.remove=function(a){return delete sessionStorage[a],null}):(a.set=function(a,b){var c="",d="object"==typeof b?JSON.stringify(b):escape(b);document.cookie=escape(a)+"="+d+c+"; path=/"},a.get=function(a){for(var b=escape(a)+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b)){var f;try{f=JSON.parse(e.substring(b.length,e.length))}catch(g){f=decodeURIComponent(e.substring(b.length,e.length))}return f}}return null},a.remove=function(b){a.create(b,"",-1)}),a}var h=function(c){function h(a){a&&A.config(a)}function i(a){a&&A.config(a)}function j(a){a&&A.config(a)}function k(a){a&&A.config(a)}function l(a){a&&A.config(a)}function m(a){a&&A.config(a)}function n(a){a&&A.config(a)}function o(a){a&&A.config(a)}function p(a){a&&A.config(a)}function q(a){a&&A.config(a)}function r(a){a&&A.config(a)}function s(a){var b=a.weight;a.variants||(a.variants=[]);for(var c=0;c<a.variants.length;c++)a.variants[c].weight&&a.variants[c].weight.length>0&&(b+=parseInt(a.variants[c].weight,10));return b}function t(a){var b=a.price;a.variants||(a.variants=[]);for(var c=0;c<a.variants.length;c++)a.variants[c].price&&a.variants[c].price>0&&(b+=parseInt(a.variants[c].price,10));return b}function u(b){var c=this;return c.rate=null,c.ship_to={name:void 0,company_name:void 0,attention_to:void 0,email:void 0,phone:void 0,address:{address_1:void 0,address_2:void 0,address_3:void 0,city:void 0,postal_code:void 0,state_code:void 0,country_code:"US"}},c.setRate=function(a){return c.rate=a,c},c.setShipTo=function(a){return c.ship_to.name=a.name,c.ship_to.company_name=a.company_name,c.ship_to.attention_to=a.attention_to,c.ship_to.email=a.email,c.ship_to.phone=a.phone,a.address&&(c.ship_to.address=a.address),c},c.setAddress=function(a){c.ship_to.address=a},c=a[PLUMB_CONFIG.ANGULAR].extend(c,b)}function v(b){var c=this;return c._id=void 0,c.ship_to={name:void 0,company_name:void 0,attention_to:void 0,email:void 0,phone:void 0,address:{address_1:void 0,address_2:void 0,address_3:void 0,city:void 0,postal_code:void 0,state_code:void 0,country_code:"US"}},c.setShipTo=function(a){return c.ship_to.name=a.name,c.ship_to.company_name=a.company_name,c.ship_to.attention_to=a.attention_to,c.ship_to.email=a.email,c.ship_to.phone=a.phone,a.address&&(c.ship_to.address=a.address),c
},c.setAddress=function(a){c.ship_to.address=a},c=a[PLUMB_CONFIG.ANGULAR].extend(c,b)}function w(b){var c=this;return c.type="credit_card",c.card={},c.bank_account={},c.reference_number=void 0,c=a[PLUMB_CONFIG.ANGULAR].extend(c,b)}function x(b){var c=new w({type:"credit_card"});return c._id=void 0,c.card_token=null,c=a[PLUMB_CONFIG.ANGULAR].extend(c,b),c.tokenizeCard=function(a,b){Stripe.setPublishableKey(b);var d=e.defer();return Stripe.card.createToken({name:a.name,number:a.number,cvc:a.cvc,exp_month:a.exp_month,exp_year:a.exp_year,address_zip:a.address_zip},function(a,b){return b.error?d.reject(b.error):(c.card_token=b.id,void d.resolve(b.id))}),d.promise},c}function y(b){var c=new w({type:"bank_account"});return c._id=void 0,c.bank_account.name=void 0,c.bank_account.account_number=void 0,c.bank_account.routing_number=void 0,c.bank_account.type="checking",c=a[PLUMB_CONFIG.ANGULAR].extend(c,b)}function z(b){var c=new w({type:"purchase_order"});return c=a[PLUMB_CONFIG.ANGULAR].extend(c,b)}var A=this;A.options={},A.Stor=g,A.Request=f;var B=A.storage=new A.Stor,C={products:{},product_lines:{}};if(!window.angular)throw Error("angular is missing");var D={caching:d.caching,local:d.local,accessToken:d.accessToken,authenticationKey:d.authenticationKey,session:null,user:null,mode:d.mode,baseUrl:d.baseUrls[d.local?"test":"production"]};return A.config=function(b){return A.options=a[PLUMB_CONFIG.ANGULAR].extend({},D,b),A.options.baseUrl=A.options.local?d.baseUrls.test:d.baseUrls.production,A.options.user=B.get("user"),A},A.handleError=function(a){a&&403===a.responseCode&&(B.remove("session"),A.options.session=null),b.$broadcast("plumbError",a)},h.prototype.get=function(a,b){if(!a)return A.options.session;if(A.options.session=B.get("session"),A.options.session&&!b)return a(null,A.options.session);var c=new f(A).get(A.options.baseUrl+"/session",null,A.handleError);c.success(function(b){return A.options.session=b.pkg.data,B.set("session",A.options.session),a(null,A.options.session)})},h.prototype.save=function(a,b){A.options.session=a;var c=new f(A).post(A.options.baseUrl+"/session",a.data,A.handleError);c.success(function(a){return A.options.session=a.pkg.data,B.set("session",A.options.session),b?b(null,A.options.session):void 0})},i.prototype.get=function(a){A.session.get(function(b,c){return c.data.cart?a(null,c.data.cart):(c.data.cart=[],void A.session.save(c,function(b,c){return a(null,c.data.cart)}))})},i.prototype.add=function(b,c,d){var e=JSON.stringify(b.variants);A.cart.get(function(f,g){for(var h=0;h<g.length;h++)if(g[h]._id===b._id&&JSON.stringify(g[h].variants)===e)return g[h].qty+=parseInt(c,10),A.session.get(function(a,b){b.data.cart=g,A.session.save(b,function(){return d(null,g)})});g.push({_id:b._id,name:b.name,sub_title:b.sub_title,qty:parseInt(c,10),image:b.images[0],weight:b.weight,dimensions:b.dimensions,price:b.price,product_lines:b.product_lines,requires_shipping:b.requires_shipping,allow_presale:b.allow_presale,taxable:b.taxable,minimum_quantity:b.minimum_quantity,quantity_in_box:b.quantity_in_box,variants:a[PLUMB_CONFIG.ANGULAR].copy(b.variants)}),A.session.get(function(a,b){b.data.cart=g,A.session.save(b,function(){return d(null,g)})})})},i.prototype.update=function(a,b,c){A.cart.get(function(d,e){for(var f=0;f<e.length;f++)if(e[f]._id===a._id){e[f].qty=parseInt(b);break}A.session.get(function(a,b){b.data.cart=e,A.session.save(b,function(){return c(null,e)})})})},i.prototype.remove=function(a,b){A.cart.get(function(c,d){for(var e=0;e<d.length;e++)if(d[e]._id===a._id){d.splice(e,1);break}A.session.get(function(a,c){c.data.cart=d,A.session.save(c,function(){return b(null,d)})})})},i.prototype.empty=function(a){A.session.get(function(b,c){c.data.cart=[],A.session.save(c,function(){return a(null,[])})})},i.prototype.replace=function(a,b){A.session.get(function(c,d){d.data.cart=a,A.session.save(d,function(a,c){return a?b(a,null):b(null,c.data.cart)})})},j.prototype.register=function(a,c){var d=new f(A).post(A.options.baseUrl+"/register",a,A.handleError);d.success(function(a){h.user_id=a.pkg.data._id,A.session.get(function(){return A.auth.setUser(a.pkg.data),b.$broadcast("plumbRegistered",a.pkg.data),c(null,a.pkg.data)},!0)})},j.prototype.login=function(a,c,d){var e=new f(A).post(A.options.baseUrl+"/login",{username:a,password:c},A.handleError);e.success(function(a){A.session.get(function(){return A.auth.setUser(a.pkg.data),b.$broadcast("plumbSignIn",a.pkg.data),d(null,a.pkg.data)},!0)})},j.prototype.forgotPassword=function(a,c){var d=new f(A).post(A.options.baseUrl+"/forgot-password",{email:a},A.handleError);d.success(function(a){return b.$broadcast("plumbForgotPassword",a),c(null,a)})},j.prototype.signOut=function(){B.remove("session"),B.remove("user"),A.options.session=null,A.options.user=null,b.$broadcast("plumbSignOut",!0)},j.prototype.loggedIn=function(){return B.get("user")},j.prototype.setUser=function(a){return B.set("user",a),A.options.user=a,a},k.prototype.list=function(a){A.session.get(function(){var b=new f(A).get(A.options.baseUrl+"/addresses",null,A.handleError);b.success(function(b){return a(null,b.pkg.data)})})},k.prototype.create=function(a,b){A.session.get(function(){var c=new f(A).post(A.options.baseUrl+"/addresses",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)})})},k.prototype.edit=function(a,b){A.session.get(function(){var c=new f(A).put(A.options.baseUrl+"/addresses",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)})})},k.prototype.remove=function(a,b){A.session.get(function(){var c=new f(A).del(A.options.baseUrl+"/addresses",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)})})},l.prototype.list=function(a){A.session.get(function(){var b=new f(A).get(A.options.baseUrl+"/transaction-accounts",null,A.handleError);b.success(function(b){return a(null,b.pkg.data)})})},l.prototype.create=function(a,b){A.session.get(function(){var c=new f(A).post(A.options.baseUrl+"/transaction-accounts",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)})})},l.prototype.edit=function(a,b){A.session.get(function(){var c=new f(A).put(A.options.baseUrl+"/transaction-accounts",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)})})},l.prototype.remove=function(a,b){A.session.get(function(){var c=new f(A).del(A.options.baseUrl+"/transaction-accounts",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)})})},m.prototype.list=function(a,b){A.session.get(function(){var c=JSON.stringify(a);if(C.products[c])return b(null,C.products[c]);var d=new f(A).get(A.options.baseUrl+"/products",a,A.handleError);d.success(function(a){return A.options.caching===!0&&(C.products[c]=a.pkg.data),b(null,a.pkg.data)}),d.error(function(a){return b(new Error(a.pkg.statusMessage||"Request failed"))})})},m.prototype.total=function(a,b){A.session.get(function(){var c=(JSON.stringify(a),new f(A).post(A.options.baseUrl+"/products/total",a,A.handleError));c.success(function(a){return b(null,a.pkg.data)}),c.error(function(a){return b(new Error(a.pkg.statusMessage||"Request failed"))})})},m.prototype.getProductPrice=function(a){var b=a.price;if(!a.variants)return b;for(var c=0;c<a.variants.length;c++)a.variants[c].price&&(b+=parseInt(a.variants[c].price,10));return b},n.prototype.list=function(a,b){A.session.get(function(){var c=JSON.stringify(a);if(C.product_lines[c])return b(null,C.product_lines[c]);var d=new f(A).get(A.options.baseUrl+"/product-lines",a,A.handleError);d.success(function(a){return A.options.caching===!0&&(C.product_lines[c]=a.pkg.data),b(null,a.pkg.data)}),d.error(function(a){return b(new Error(a.pkg.statusMessage||"Request failed"))})})},n.prototype.total=function(a,b){A.session.get(function(){var c=(JSON.stringify(a),new f(A).post(A.options.baseUrl+"/product-lines/total",a,A.handleError));c.success(function(a){return b(null,a.pkg.data)}),c.error(function(a){return b(new Error(a.pkg.statusMessage||"Request failed"))})})},o.prototype.list=function(a,b){A.session.get(function(){var c=new f(A).get(A.options.baseUrl+"/orders",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)}),c.error(function(a){return b(new Error(a.pkg.statusMessage||"Request failed"))})})},o.prototype.create=function(a,b){A.session.get(function(){var c=new f(A).post(A.options.baseUrl+"/orders",a,A.handleError);c.success(function(a){return b(null,a.pkg.data)}),c.error(function(a){return b(new Error(a.pkg.statusMessage||"Request failed"))})})},o.prototype.taxes=function(a,b,c){var d={value:a,ship_to:b.ship_to};A.session.get(function(a){if(a)return c(a,null);var b=new f(A).post(A.options.baseUrl+"/orders/taxes",d,A.handleError);b.success(function(a){return c(null,a.pkg.data)}),b.error(function(a){return c(new Error(a.pkg.statusMessage||"Request failed"))})})},p.prototype.get=function(a){var b=new f(A).get(A.options.baseUrl+"/store/settings",A.handleError);b.success(function(b){return a(null,b.pkg.data)})},q.prototype.getDiscounts=function(a){var b=new f(A).get(A.options.baseUrl+"/discounts",A.handleError);b.success(function(b){return a(null,b.pkg.data)})},q.prototype.checkDiscount=function(a,b){var c=new f(A).get(A.options.baseUrl+"/discounts/check",{code:a},A.handleError);c.success(function(a){return b(null,a.pkg.data)})},q.prototype.checkGiftCard=function(a,b){var c=new f(A).get(A.options.baseUrl+"/gift-cards/check",{code:a},A.handleError);c.success(function(a){return b(null,a.pkg.data)})},q.prototype.getDiscountOrderValue=function(a,b){if(console.log(a,b),"fixed"===a.value_type){if(a.product_restriction&&a.products.length){for(var c=0;c<a.products.length;c++)for(var d=0;d<b.length;d++)if(a.products[c]._id===b[d]._id)return a.value;return 0}if(a.product_line_restrictions&&a.product_lines.length){for(var c=0;c<a.product_lines.length;c++)for(var d=0;d<b.length;d++)for(var e=0;e<b[d].product_lines.length;e++)if(a.product_lines[c]._id===b[d].product_lines._id)return a.value;return 0}return a.value}if("percent"===a.value_type){var f=0;if(a.product_restriction){for(var c=0;c<a.products.length;c++)for(var d=0;d<b.length;d++)a.products[c]._id===b[d]._id&&(f+=parseInt(A.products.getProductPrice(b[d]),10)*parseInt(b[d].qty,10));return parseFloat(a.value)/100*f}if(a.product_line_restriction){for(var c=0;c<a.product_lines.length;c++)for(var d=0;d<b.length;d++)for(var e=0;e<b[d].product_lines.length;e++)a.product_lines[c]._id===b[d].product_lines._id&&(f+=parseInt(A.products.getProductPrice(b[d]),10)*parseInt(b[d].qty,10));return parseFloat(a.value)/100*f}for(var c=0;c<b.length;c++)f+=parseInt(A.products.getProductPrice(b[c]),10)*parseInt(b[c].qty,10);return parseFloat(a.value)/100*f}},r.prototype.rates=function(b,c,d){if(!b.products)return c(new Error("Missing products"),null);var e=a[PLUMB_CONFIG.ANGULAR].copy(b);delete e.products,e.packages=[{weight:0,price:0}],e.products=[];for(var g=0;g<b.products.length;g++)e.packages[0].weight+=s(b.products[g])*b.products[g].qty,e.packages[0].price+=t(b.products[g])*b.products[g].qty,e.products.push(b.products[g]);d||(d=A.handleError),A.session.get(function(){var a=new f(A).post(A.options.baseUrl+"/shipping/rates",e,d);a.success(function(a){var b=a.pkg.data;return b?(b.sort(function(a,b){return a.cost-b.cost}),c(null,b)):c(a.pkg.meta,null)})})},A.session=new h,A.cart=new i,A.auth=new j,A.addresses=new k,A.payment_methods=new l,A.products=new m,A.product_lines=new n,A.orders=new o,A.shipping=new r,A.settings=new p,A.discounts=new q,A.shipment=u,A.customer=v,A.credit_card=x,A.bank_account=y,A.purchase_order=z,A.config(c)};return new h(d)}]).config(function(a){a.enabled(!1)}).factory("plumbMenuService",["plumb","plumbConfig","$rootScope","$filter",function(b,c,d,e){var f=this;return f.menu=[],f.cart=[],f.sidebars=[],f.showing=null,f.back=null,f.next=null,f.quantity_total=0,b.cart.get(function(a,b){f.cart=b,f.quantity_total=0;for(var c=0;c<f.cart.length;c++)f.quantity_total+=parseInt(f.cart[c].qty,10)}),d.$on("cartUpdated",function(a,b){f.cart=b,f.quantity_total=0;for(var c=0;c<f.cart.length;c++)f.quantity_total+=parseInt(f.cart[c].qty,10)}),f.close=function(){f.showing=null,d.$broadcast("menuClosed",!0)},f.toggle=function(a,b,c){f.showing=f.showing===a?null:a,f.back=b?b:null,f.next=c?c:null;for(var e=0;e<f.sidebars.length;e++)f.sidebars[e].tag===a&&f.sidebars[e].back&&(f.back=f.sidebars[e].back);d.$broadcast("menuToggled",{val:a,back:b,next:c})},f.show=function(a){return a===f.showing},f.addMenuItem=function(b,c){c||(c=f.menu.length);var d={name:null,tag:null,uri:null,buttonTemplateUrl:"plumb-templates/menu/button.html",showLoggedIn:!1,showLoggedOut:!1,onClick:null};return b=a[PLUMB_CONFIG.ANGULAR].extend({},d,b),f.menu.splice(c,0,b),f},f.addSidebar=function(b){var c={tag:null,className:null,templateUrl:null,back:null};return b=a[PLUMB_CONFIG.ANGULAR].extend({},c,b),f.sidebars.push(b),f},f.getUri=function(a){return a.uri&&a.uri.length>0?a.uri:null},f.addToCart=function(a,c,e){return e&&e.length&&(a.variants=e),a.minimum_quantity&&parseInt(c,10)<a.minimum_quantity?d.$emit("cartError","Minimum Quantity of "+a.minimum_quantity+" required"):void b.cart.add(a,c,function(a,b){return a?(d.$emit("cartError",a),console.log(a)):void d.$emit("cartUpdated",b)})},f.getPrice=function(a){if(!a)return"N/A";var b=a.price;if(!a.variants)return e("currency")(b/100);for(var c=0;c<a.variants.length;c++)a.variants[c].price&&(b+=parseInt(a.variants[c].price,10));return e("currency")(b/100)},f.setVariant=function(a,b,c){a.variants||(a.variants=[]);for(var d=0;d<a.variants.length;d++)if(a.variants[d].name===b)return null===c?void a.variants.splice(d,1):(a.variants[d].value=c.name,a.variants[d].price=c.price,a.variants[d].weight=c.weight,a);return a.variants.push({name:b,value:c.name,price:c.price,weight:c.weight}),a},f.setMultiVariant=function(a,b,c){a.variants||(a.variants=[]);for(var d=0;d<a.variants.length;d++)if(a.variants[d].name===b&&a.variants[d].value===c.name)return void a.variants.splice(d,1);return a.variants.push({name:b,value:c.name,price:c.price,weight:c.weight}),a},f.checkShowing=function(a){var c=b.auth.loggedIn();return c&&a.showLoggedIn?!0:!c&&a.showLoggedOut?!0:!1},f.clearMenu=function(){return f.menu=[],f},f.clearSidebar=function(){return f.sidebars=[],f},f.checkClass=function(a){return f.showing===a?{active:!0}:""},f.checkButtonClass=function(a){if("cart"===a.tag)return f.cart&&f.cart.length?{cart:!0,"cart-empty":f.cart.length<=0}:{cart:!0,"cart-empty":!0};var b={};return b[a.tag]=!0,b},f.addSidebar({tag:"login",className:"plumb-login",templateUrl:"plumb-templates/menu/sign-in.html"}).addSidebar({tag:"account",className:"plumb-account",templateUrl:"plumb-templates/menu/account.html"}).addSidebar({tag:"cart",className:"plumb-cart",templateUrl:"plumb-templates/menu/cart.html"}).addSidebar({tag:"checkout",className:"plumb-checkout",templateUrl:"plumb-templates/menu/checkout.html",back:"cart"}).addSidebar({tag:"checkout-2",className:"plumb-checkout",templateUrl:"plumb-templates/menu/checkout-2.html",back:"checkout"}).addSidebar({tag:"checkout-3",className:"plumb-checkout",templateUrl:"plumb-templates/menu/checkout-3.html",back:"checkout-2"}).addSidebar({tag:"checkout-complete",className:"plumb-checkout",templateUrl:"plumb-templates/menu/checkout-complete.html"}).addSidebar({tag:"forgot-password",className:"plumb-forgot-password",templateUrl:"plumb-templates/menu/forgot-password.html"}).addSidebar({tag:"register",className:"plumb-register",templateUrl:"plumb-templates/menu/register.html"}),f.addMenuItem({name:"Sign In",tag:"login",icon:"kicon-login",template:"plumb-templates/menu/sign-in.html",showLoggedIn:!1,showLoggedOut:!0}).addMenuItem({name:"Account",tag:"account",icon:"kicon-account",template:"plumb-templates/menu/account.html",showLoggedIn:!0,showLoggedOut:!1}).addMenuItem({name:"Shopping Cart",tag:"cart",buttonTemplateUrl:"plumb-templates/menu/button-cart.html",template:"plumb-templates/menu/cart.html",showLoggedIn:!0,showLoggedOut:!0}),f.addMenuItem({name:"Sign Out",tag:"sign-out",icon:"kicon-sign_out",onClick:function(){b.auth.signOut()},showLoggedIn:!0,showLoggedOut:!1}),f}]).directive("plumbPopover",function(){return{scope:{plumbPopover:"=",showing:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){var c="plumb-templates/plumb-popover.html";return b.templateUrl&&(c=b.templateUrl),c},link:function(b,c){var d=a[PLUMB_CONFIG.ANGULAR].element(c[0].querySelector(".plumb-popover"));c.bind("mouseover",function(){b.showing=!0,b.$apply()}),c.bind("mouseout",function(){b.showing=!1,b.$apply()}),b.$watch(function(){return b.showing},function(){b.showing="true"===b.showing||b.showing===!0,b.showing===!0?d.addClass("active"):d.removeClass("active")},!0)}}}).directive("plumbImage",["plumb","plumbConfig","$parse",function(a,b){return{restrict:"E",scope:{src:"=",options:"=?",alt:"="},template:'<img ng-src="{{newSrc}}" alt="{{alt}}">',link:function(a){function c(a,c){var d=b.local?b.baseUrls.test:b.baseUrls.production,e=d+"/imager?access-token="+b.accessToken+"&url="+encodeURIComponent(a);return c.size&&(e+="&size="+c.size),c.effect&&(e+="&effect="+c.effect),c.force&&(e+="&force=true"),e}a.newSrc=null,a.$watch(function(){return a.src},function(){a.src&&(a.newSrc=c(a.src,a.options))})}}}]).directive("plumbProduct",["$rootScope","plumb","plumbConfig","plumbMenuService","$filter",function(a,b,c,d,e){return{restrict:"E",scope:{id:"="},templateUrl:function(a,b){var c="plumb-templates/plumb-product.html";return b.templateUrl&&(c=b.templateUrl),c},replace:!0,link:function(f){f.plumb=b,f.config=c,f.product={},f.plumbMenuService=d,f.options={quantity:1},b.products.list({_id:f.id},function(b,c){if(!c||!c.length)return b?a.$broadcast("plumbError",b):a.$broadcast("plumbError","Could not find product");if(f.product=c[0],f.product.attributes&&f.product.attributes.length)for(var e=0;e<f.product.attributes.length;e++)if("select"===f.product.attributes[e].type?f.product.attributes[e].$selected=null:"multi"===f.product.attributes[e].type&&(f.product.attributes[e].$selected=[]),f.product.attributes[e].required)if(f.product.attributes[e]["default"])for(var g=0;g<f.product.attributes[e].options.length;g++)f.product.attributes[e].options[g].name===f.product.attributes[e]["default"]&&(f.product.attributes[e].$selected=f.product.attributes[e].options[g],f.product=d.setVariant(f.product,f.product.attributes[e].name,f.product.attributes[e].options[g]));else f.product.attributes[e].$selected=f.product.attributes[e].options[0],f.product=d.setVariant(f.product,f.product.attributes[e].name,f.product.attributes[e].options[0]);else for(var g=0;g<f.product.attributes[e].options.length;g++)f.product.attributes[e].options[g].name===f.product.attributes[e]["default"]&&(f.product.attributes[e].$selected=f.product.attributes[e].options[g],f.product=d.setVariant(f.product,f.product.attributes[e].name,f.product.attributes[e].options[g]))}),f.variantDisplay=function(a){var b=a.name;return c.display_price_breakdown?(a.price&&(b+=" "+(a.price>0?"add ":"subtract ")+e("currency")(a.price/100)),b):b}}}}]).directive("plumbMenu",["plumb","plumbConfig","plumbMenuService","$timeout","$window","$document","$rootScope","$filter",function(c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:function(a,b){var c="plumb-templates/plumb-menu.html";return b.templateUrl&&(c=b.templateUrl),c},replace:!0,link:function(k){function l(){for(var a=0,b=0;b<k.checkout.discounts.length;b++)switch(k.checkout.discounts[b].type){case"code":a+=c.discounts.getDiscountOrderValue(k.checkout.discounts[b],k.cart);break;case"gift-card":a+=parseInt(k.checkout.discounts[b].amount,10)}return a}if(k.config=d,k.menuService=e,k.cart=null,k.wishlist=null,k.apiLoading=0,k.paymentEnabled=!1,k.requiresShipping=!1,k.requiresTax=!1,k.addressList=[],k.paymentMethodList=[],k.checkout={service_carrier:null,service_code:null,shipment:new c.customer,billing:new c.customer,payment_method:new c.credit_card,products:null,notes:"",discounts:[]},k.geocodeComplete=!1,k.stateList=d.states,k.countryList=d.countries,k.expirationMonths=d.months,k.expirationYears=d.years,k.shippingAddressCopied=!1,k.packages=[],k.selectedRate=[],k.product_total=0,k.quantity_total=0,k.tax_total=0,k.shipping_total=0,k.discount_total=0,k.final_total=0,k.cartAddText=d.cartAddText?d.cartAddText:"Added to cart",k.shoppingCartPopoverText="Shopping Cart",k.cartAddActive=!1,k.order=null,k.settings=null,k.altPaymentType="credit_card",!g.google){for(var m=h[0].getElementsByTagName("script"),n=!1,o=0;o<m.length;o++)m[o].src.indexOf("maps.googleapis")>-1&&(n=!0);if(!n){var p=b.createElement("script");p.type="text/javascript",p.async=!0,p.src="//maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyDfl3BRqXwFWerx20m00Hec6mSFyL42w0Y&callback=initialize",b.getElementsByTagName("body")[0].appendChild(p)}}k.plumb=c,k.switchPaymentMethod=function(a){"purchase_order"===a?(k.checkout.payment_method=new c.purchase_order,k.altPaymentType="purchase_order"):"credit_card"===a&&(k.checkout.payment_method=new c.credit_card,k.altPaymentType="credit_card")},k.getActivePayment=function(a){return a===k.altPaymentType?{active:!0}:null},k.updateProductTotal=function(){k.product_total=0,k.quantity_total=0;for(var a,b=0;b<k.cart.length;b++)k.cart[b].requires_shipping&&(k.requiresShipping=!0),k.cart[b].taxable&&(k.requiresTax=!0),k.quantity_total+=parseInt(k.cart[b].qty,10),a=parseInt(k.cart[b].qty,10)*k.getProductPrice(k.cart[b]),k.product_total+=a},k.getProductPrice=function(a){var b=a.price;if(!a.variants)return b;for(var c=0;c<a.variants.length;c++)a.variants[c].price&&(b+=parseInt(a.variants[c].price,10));return b},k.lookupGeoCode=function(a,b,c){if(b&&!(b.length<5)){if(!g.google)return k.geocodeComplete=!0;var d=new google.maps.Geocoder;d.geocode({address:a+" "+b},function(a,b){if(b!==google.maps.GeocoderStatus.OK)return k.geocodeComplete=!0;for(var d=0;d<a[0].address_components.length;d++){var e=a[0].address_components[d];"locality"===e.types[0]&&(c.ship_to.address.city=e.long_name),"administrative_area_level_1"===e.types[0]&&(c.ship_to.address.state_code=e.short_name),"country"===e.types[0]&&(c.ship_to.country_code=e.short_name)}k.geocodeComplete=!0,k.$apply()})}},k.updateCheckout=function(){k.checkout.shipment=c.session.get().data.shipment||new c.customer,k.checkout.billing=c.session.get().data.billing||new c.customer,k.checkout.discounts=c.session.get().data.discounts||[],k.checkout.shipment.ship_to.address.address_1&&k.lookupGeoCode(k.checkout.shipment.ship_to.address.address_1,k.checkout.shipment.ship_to.address.postal_code,k.checkout.shipment),k.checkout.billing.ship_to.address.address_1&&k.lookupGeoCode(k.checkout.billing.ship_to.address.address_1,k.checkout.billing.ship_to.address.postal_code,k.checkout.billing)},c.cart.get(function(a,b){k.cart=b,c.settings.get(function(a,b){console.log(b)}),k.updateProductTotal(),k.updateCheckout()}),k.updateFinalTotal=function(){k.final_total=k.product_total+k.shipping_total+k.tax_total-k.discount_total,k.final_total<0&&(k.final_total=0)},k.$on("cartUpdated",function(a,b){var c=k.shoppingCartPopoverText;k.shoppingCartPopoverText=k.cartAddText,k.cartAddActive=!0,function(a){f(function(){k.shoppingCartPopoverText=a,k.cartAddActive=!1},3e3),k.cart=b,k.updateProductTotal(),k.updateFinalTotal()}(c)}),k.updateQuantity=function(a){a.minimum_quantity>a.qty&&(a.qty=a.minimum_quantity),k.updateProductTotal(),c.cart.update(a,a.qty,function(a,b){k.cart=b})},k.removeProduct=function(a){c.cart.remove(a,function(a,b){k.cart=b,k.updateProductTotal()})},k.saveAddress=function(a){var b=c.auth.loggedIn();b&&(a._id&&c.addresses.edit(a,function(){k.getUserDetails()}),c.addresses.create(a,function(){k.getUserDetails()}))},k.deleteAddress=function(a){c.addresses.remove({_id:a._id},function(a){return a?console.log(a):void k.getUserDetails()})},k.savePaymentMethod=function(a){var b=c.auth.loggedIn();b&&a._id&&c.payment_methods.edit(a,function(){k.getUserDetails()})},k.getPaymentMethodType=function(a){return"credit_card"===a.type?"Credit Card":"bank_account"===a.type?"Bank Account":"credit_line"===a.type?"Credit Line":void 0},k.deletePaymentMethod=function(a){c.payment_methods.remove({_id:a._id},function(a){return a?console.log(a):void k.getUserDetails()})},k.copyShippingAddress=function(){k.checkout.billing.ship_to=a[PLUMB_CONFIG.ANGULAR].extend(k.checkout.billing.ship_to,k.checkout.shipment.ship_to),k.shippingAddressCopied=!0},k.getTaxes=function(){var a=0;return k.discount_total=l(),a=k.product_total+k.shipping_total-k.discount_total,0>a?(a=0,k.tax_total=0,k.updateFinalTotal()):k.requiresTax?void c.orders.taxes(a,{ship_to:{address:{postal_code:k.checkout.shipment.ship_to.address.postal_code}}},function(a,b){k.tax_total=b,k.updateFinalTotal()}):(k.tax_total=0,k.updateFinalTotal())},k.getRates=function(){!k.checkout.shipment.ship_to.address.postal_code||k.checkout.shipment.ship_to.address.postal_code.length<5||(k.packages=[],k.selectedRate=[],c.shipping.rates({ship_to:k.checkout.shipment.ship_to,products:k.cart},function(a,b){if(a){for(var c=0;c<a.length;c++)k.addMessage("error",a[c],"shipping-rates");return console.log(a)}b instanceof Array||(b=[].push({rates:b})),k.packages=b;for(var c=0;c<k.packages.length;c++)k.selectedRate[c]=k.packages[c].rates[0],k.selectedRate[c].products=k.packages[c].products;k.getTaxes()},function(a){if(a.pkg.statusMessage instanceof Array)for(var b=0;b<a.pkg.statusMessage.length;b++)k.addMessage("error",a.pkg.statusMessage[b],"shipping-rates");else k.addMessage("error",a.pkg.statusMessage,"shipping-rates");return console.log(a)}))},k.getUserDetails=function(){var a=c.auth.loggedIn();a&&(k.checkout.shipment.ship_to.name=a.first_name+" "+a.last_name,k.checkout.shipment.ship_to.email=a.email,k.checkout.shipment.ship_to.phone=a.phone,c.addresses.list(function(a,b){b.length&&(k.addressList=b,k.checkout.shipment.ship_to=b[0],k.geocodeComplete=!0)}),c.payment_methods.list(function(a,b){k.paymentMethodList=b}))},k.changedAddress=function(){k.geocodeComplete=!0},k.$on("plumbSignIn",function(){k.getUserDetails()}),c.auth.loggedIn()&&k.getUserDetails(),k.$on("plumbRegistered",function(){k.getUserDetails()}),k.$watch("selectedRate",function(){if(k.selectedRate&&k.checkout.shipment.ship_to.address.postal_code){k.shipping_total=0,k.checkout.shipping_rates=[];for(var a=0;a<k.selectedRate.length;a++)k.shipping_total+=100*k.selectedRate[a].cost,k.checkout.shipping_rates.push(k.selectedRate[a]);k.getTaxes()}},!0),k.onRateChange=function(a,b,c){k.selectedRate[a].products=c},k.completeOrder=function(){return k.apiLoading>0?void k.addMessage("error","Please wait, we are processing your order"):(k.apiLoading++,0===k.final_total?k.finishCompleteOrder(null):void(k.checkout.payment_method._id?k.finishCompleteOrder(k.checkout.payment_method):"credit_card"===k.checkout.payment_method.type?(new c.credit_card).tokenizeCard({name:k.checkout.payment_method.card.name,number:k.checkout.payment_method.card.card_number,exp_month:k.checkout.payment_method.card.expiration_month,exp_year:k.checkout.payment_method.card.expiration_year,cvc:k.checkout.payment_method.card.security_code,address_zip:k.checkout.billing.ship_to.postal_code},c.options.session.stripe_publishable_key).then(function(a){k.finishCompleteOrder({type:"credit_card",card:{card_token:a}})})["catch"](function(a){k.addMessage("error",a),k.apiLoading--}):k.finishCompleteOrder(k.checkout.payment_method)))},k.finishCompleteOrder=function(b){c.orders.create({shipping_rates:k.checkout.shipping_rates,ship_to:k.checkout.shipment.ship_to,customer:k.checkout.billing.ship_to,payment_method:b,products:a[PLUMB_CONFIG.ANGULAR].copy(k.cart),discounts:k.checkout.discounts,notes:""},function(a,b){return a?k.apiLoading--:(k.order=b,void c.cart.empty(function(a,b){k.cart=b,k.apiLoading--,i.$emit("cartUpdated",b),e.toggle("checkout-complete")}))})},k.addMessage=function(a,b,c){return"error"===a?i.$broadcast("apiError",b):void i.$broadcast("apiMessage",{type:a,msg:b,section:c})},k.resetForms=function(){k.login={username:null,password:null},k.register={first_name:null,last_name:null,email:null,password:null},k.forgot={email:null},k.contact={name:null,email:null,phone:null,message:null}},k.loginUser=function(a){c.auth.login(k.login.username,k.login.password,function(){k.addMessage("success","Successfully logged in"),f(function(){e.next?e.toggle(e.next):e.showing=a?a:null},500)})},k.registerUser=function(a){k.register.confirm_password=k.register.password,c.auth.register(k.register,function(){k.addMessage("success","Account registered, and logged in"),f(function(){e.next?e.toggle(e.next):e.showing=a?a:null},500)})},k.forgotPassword=function(){c.auth.forgotPassword(k.forgot.email,function(){k.addMessage("success","Instructions sent to your email, go check it")})},k.$on("plumbError",function(a,b){return console.log(b),b&&b.pkg?void 0:k.addMessage("error","An error occurred connecting to Plumb's servers, check your connection.")}),k.$on("plumbSignOut",function(){e.showing=null,k.paymentMethodList=[],k.addressList=[],c.cart.get(function(a,b){k.cart=b,k.updateProductTotal()}),k.checkout={service_carrier:null,service_code:null,shipment:new c.customer,billing:new c.customer,payment_method:new c.credit_card,products:null,notes:""}}),k.$on("apiLoading",function(a,b){b===!0?k.apiLoading++:k.apiLoading>0&&k.apiLoading--}),k.$on("menuToggled",function(a,b){k.resetForms(),"checkout-2"===b.val?(c.options.session.data.shipment=k.checkout.shipment,c.session.save(c.options.session)):"checkout-3"===b.val&&(c.options.session.data.billing=k.checkout.billing,c.session.save(c.options.session),k.checkout.shipment.ship_to.address&&k.checkout.shipment.ship_to.address.postal_code||(k.checkout.shipment.ship_to.address=angular.copy(k.checkout.billing.ship_to.address)),k.getRates(),k.getTaxes())}),k.displayProductPrice=function(a){return d.display_price_breakdown?j("currency")(a.price/100):e.getPrice(a)},k.displayVariantPrice=function(a){return d.display_price_breakdown?j("currency")(a.price/100):"&nbsp;"},k.addDiscount=function(a){k.checkout.discounts.push({type:a,code:null,amount:null})},k.updateDiscountStatus=function(a){switch(a.type){case"code":c.discounts.checkDiscount(a.code,function(b,c){angular.extend(a,c),k.getTaxes()});break;case"gift-card":c.discounts.checkGiftCard(a.code,function(b,c){angular.extend(a,c),k.getTaxes()})}},k.getDiscountType=function(a){switch(a){case"code":return"Discount Code";case"gift-card":return"Gift Card"}},k.getDiscountStatus=function(a){if(null===a.value)return"Enter code to get amount";switch(a.type){case"code":var b=c.discounts.getDiscountOrderValue(a,k.cart);return b?"Amount: "+j("currency")(b/100):"Code is expired or invalid for this discount";case"gift-card":if(a.amount)return"Amount: "+j("currency")(a.amount/100)}},k.resetForms()}}}]).directive("codeInput",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(!a)return a;for(var b=a.toUpperCase().replace(/-/g,"").split(""),c=b.slice(0),e=0;e<b.length;e++)e>0&&e%4===0&&c.splice(e+e/4-1,0,"-");var f=c.join("");return f!==a&&(d.$setViewValue(f),d.$render()),f.replace(/-/g,"")}),d.$formatters.push(function(a){if(!a)return a;for(var b=a.toUpperCase().split(""),c=b.slice(0),d=0;d<b.length;d++)d>0&&d%4===0&&c.splice(d+d/4-1,0,"-");return c.join("")})}}}]),a.PLUMB_CONFIG&&(a.PLUMB_CONFIG.integrated||(a[PLUMB_CONFIG.ANGULAR].injector(["ng","PlumbApp"]).invoke(["$compile","$rootScope","plumb","plumbConfig","plumbMenuService",function(c,d,e,f){var g=a[PLUMB_CONFIG.ANGULAR].element(b).find("body");f.accessToken&&g.append("<plumb-menu></plumb-menu>");var h=a[PLUMB_CONFIG.ANGULAR].element(b).injector();b.querySelectorAll("[ng-app]").length||h||a[PLUMB_CONFIG.ANGULAR].bootstrap(g[0],["PlumbApp"])}]),a.PLUMB_CONFIG.GOOGLE_FONTS&&a.PLUMB_CONFIG.GOOGLE_FONTS!==!0||(a.WebFontConfig={google:{families:["Questrial::latin"]}},function(){var a=document.createElement("script");a.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",a.type="text/javascript",a.async="true";
var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()))),a.initialize=function(){}}if(a.PLUMB_CONFIG?a.PLUMB_CONFIG.ANGULAR||(a.PLUMB_CONFIG.ANGULAR="angular"):(console.log("no plumb config"),a.PLUMB_CONFIG={ANGULAR:"angular",MENU:{},STRIPEJS:!0}),"undefined"==typeof a.PLUMB_CONFIG.STRIPEJS&&(a.PLUMB_CONFIG.STRIPEJS=!0),a.PLUMB_CONFIG.STRIPEJS){var d=b.createElement("script");d.type="text/javascript",d.async=!0,d.src="https://js.stripe.com/v2/",b.getElementsByTagName("body")[0].appendChild(d),d.readyState?d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&(d.onreadystatechange=null)}:d.onload=function(){}}if(a[a.PLUMB_CONFIG.ANGULAR]||"undefined"!=typeof a.PLUMB_CONFIG.REQUIRE_ANGULAR&&a.PLUMB_CONFIG.REQUIRE_ANGULAR!==!0)c();else{var e=b.createElement("script");e.type="text/javascript",e.async=!0,e.src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js",b.getElementsByTagName("body")[0].appendChild(e),e.readyState?e.onreadystatechange=function(){("loaded"==e.readyState||"complete"==e.readyState)&&(e.onreadystatechange=null,c())}:e.onload=function(){c()}}}(window,document);